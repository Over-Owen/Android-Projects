webpackJsonp([20],{fIuf:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("bOdI"),o=i.n(n),s={props:["initItem","loading"],data:function(){return{knowledgeDemotion:{type:"",description:""},csSelectType:"0-1",chartOption:[{value:"0-1",label:"试题维度"},{value:"1-1",label:"知识点维度"}],lineChartLen:20}},mounted:function(){this.initItem.question_one_histogram&&(this.lineChartLen=this.initItem.question_one_histogram.index.length,this.lineCharts(this.initItem.question_one_histogram))},methods:{setChar:function(e){if("0"==e){this.chartTip="各题",this.$refs.lineCharts.style.display="block",this.$refs.knowTip.style.display="none";var t=this.$store.state.reportAllList.question_one_histogram;this.lineChartLen=t.index.length;var i=this.lineChartLen>=20?540:560;this.resetChartHeight(i),this.lineCharts(t)}else{this.chartTip="知识点";var n=this.$store.state.reportAllList.knowledge_one_histogram;this.lineChartLen=n.index.length;var o=this.lineChartLen>=20?540:560;this.resetChartHeight(o),this.getKnowledgesInfo(n,1)}},getChangeData:function(e){var t=this,i=e.split("-"),n=i[0];if(1==i[1]){var o=this;this.$nextTick(function(){o.callLoading(!0)}),this.setChar(n)}else{"0"==n?(this.title="试题基本答题汇总结果统计",this.isShowOptionSet=!0,lwmainService.getPracticeBaseInfo().then(function(e){t.resultData=e}).catch(function(e){t.resultData=t.$store.state.reportAllList.question_one_table})):(this.title="知识点基本答题汇总结果统计",lwmainService.getPracticeKnowledgeBaseInfo().then(function(e){t.getKnowledgesInfo(e,2)}).catch(function(e){var i=t.$store.state.reportAllList.knowledge_one_table;t.getKnowledgesInfo(i,2)}))}},resetChartHeight:function(e){},lineCharts:function(e){var t=this,i=this;this.$nextTick(function(){var n=t.$refs.mylineChars;if(n){var s=t.$echarts.init(n),a=e.index,l=e.rightCount,r=e.avgTime,h=a.length>20,c=window.innerWidth>1366?25:20;s.setOption({tooltip:{trigger:"item",formatter:function(e){return"line"==e.componentSubType&&(e.value=i.utils$.fromatDate(e.value)),e.seriesName+" : "+e.value},axisPointer:{type:"cross",crossStyle:{color:"#333333"}}},legend:{data:["答对学生人数","平均单个学生答题耗时"],itemGap:40,textStyle:{color:"#333333",fontSize:14}},grid:{top:"12%",left:"5%",right:"7%",bottom:"15%"},dataZoom:{show:h,start:0,end:a.length<c?100:a.length>=c&&a.length<=50?70:10,bottom:60,borderColor:"#999999",fillerColor:"rgba(0, 36, 106, 0.5)",textStyle:{color:"#333333"}},xAxis:[{type:"category",data:a,axisLine:{lineStyle:{color:"#999999",width:1,fontSize:12}},axisPointer:{type:"shadow"}}],yAxis:[{type:"value",name:"答对学生人数",axisTick:{show:!1},axisLabel:{formatter:"{value}"},nameTextStyle:{fontSize:14,color:"#999999"},axisLine:{lineStyle:{color:"#999999",width:1}},splitLine:{lineStyle:{color:"#999999",opacity:"0.3"}}},{type:"value",name:"平均单个学生答题耗时",axisTick:{show:!1},splitLine:{show:!1},axisLabel:{interval:1,formatter:function(e){return i.utils$.fromatDate(e)}},nameTextStyle:{fontSize:14,color:"#999999",padding:[0,40,0,0]},axisLine:{lineStyle:{color:"#999999",width:1}}}],series:[o()({name:"答对学生人数",type:"bar",barMinHeight:10,lineStyle:{color:"#ff7d55"},minInterval:1,label:{normal:{show:!0,position:"top",formatter:function(e){return e.value+"人"},color:"#999999"}},itemStyle:{color:"#ff7d55"},data:l,barWidth:25},"itemStyle",{normal:{color:new t.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#febb5c"},{offset:1,color:"#ff7e55"}])}}),{name:"平均单个学生答题耗时",type:"line",yAxisIndex:1,data:r,lineStyle:{color:"#226cfb"},itemStyle:{color:"#226cfb"}}]}),s.on("click",function(t){console.log(e);var n=e.questionIdList[t.dataIndex],o=e.index[t.dataIndex];if(-1==o.indexOf("大")){window.localStorage.setItem("toSingle",!0);try{lwmain.HistogramChartToPieChart(n)}catch(e){window.localStorage.setItem("orderName",o)}}else i.$message.info("关联小题的大题不支持点击查看详细报表！请点击右侧其对应的各小题的柱状图查看其详情。")}),s.on("finished",function(){i.callLoading(!1)}),s._dom.style.width=document.getElementById("inner-box-1").clientWidth+"px",s.resize()}})},getKnowledgesInfo:function(e,t){var i=this;switch(this.knowledgeDemotion.type=e.knowledgesInfo,this.knowledgeDemotion.type||(1==t?(0===this.knowledgeDemotion.type?(this.$refs.lineCharts.style.display="none",this.$refs.knowTip.style.display="block"):this.lineCharts(e),this.csSelectType="0-1"):(this.isShowOptionSet=!1,this.reSelectType="0-2",this.resultData=e.result)),this.knowledgeDemotion.type){case 0:this.knowledgeDemotion.description="本套试卷没有关联任何知识点！";break;case 1:this.knowledgeDemotion.description="本套试卷中不是每道题都关联了知识点，所以统计分析数据只能覆盖所有关联了知识点的试题"}1==this.knowledgeDemotion.type&&this.$confirm(this.knowledgeDemotion.description,{confirmButtonText:"知道了",type:"info",center:!0}).then(function(){1==t?(i.$refs.lineCharts.style.display="block",i.$refs.knowTip.style.display="none",i.lineCharts(e),i.csSelectType="0-1"):(i.isShowOptionSet=!1,i.resultData=e.result,i.reSelectType="0-2")})},callLoading:function(e){this.$emit("update:loading",e)}}},a={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"adjointDiagramOfKeyParameters"},[i("div",{staticClass:"inner-box-1",attrs:{id:"inner-box-1"}},[i("lw-common-top",{attrs:{selectType:e.csSelectType,title:"关键参数伴随图",options:e.chartOption},on:{selectVal:e.getChangeData}}),e._v(" "),i("div",{ref:"lineCharts",staticStyle:{width:"100%"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],ref:"mylineChars",style:{width:"100%",height:e.lineChartLen>=20?"540px":"560px"},attrs:{id:"myLineChars"}})]),e._v(" "),i("div",{ref:"knowTip",staticClass:"knowledge-tip",staticStyle:{display:"none"}},[e._v("本套试卷没有关联任何知识点！")])],1)])},staticRenderFns:[]};var l=i("VU/8")(s,a,!1,function(e){i("jSb9")},"data-v-28835483",null);t.default=l.exports},jSb9:function(e,t){}});