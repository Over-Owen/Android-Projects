webpackJsonp([6,18],{MGuF:function(t,e){},aEq4:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("aSh1"),s=(i("CS20"),{name:"smallEntry",data:function(){return{type:"report",noResult:!0}},mounted:function(){},methods:{changeChart:function(t){this.type=1==t?"report":"smallResult"},close:function(){lw.closeWindow()}},components:{smallResult:a.default}}),n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"small-entry"},[i("el-container",[i("el-header",[i("div",{staticClass:"btn"},[i("span",{class:{active:"report"===t.type},on:{click:function(e){return t.changeChart(1)}}},[t._v("该题认知结果统计")]),t._v(" "),i("span",{class:{active:"smallResult"===t.type},on:{click:function(e){return t.changeChart(2)}}},[t._v("该题答题结果统计")])])]),t._v(" "),i("el-main",[t.noResult?i("div",["report"===t.type?i("report"):t._e(),t._v(" "),"smallResult"===t.type?i("smallResult"):t._e()],1):t._e(),t._v(" "),t.noResult?t._e():i("div",{staticClass:"single-mask-wrap"},[i("div",{staticClass:"single-mask"}),t._v(" "),i("p",[t._v("没有生成数据")])])])],1)],1)},staticRenderFns:[]};var r=i("VU/8")(s,n,!1,function(t){i("MGuF")},"data-v-8a4fe88a",null);e.default=r.exports},aSh1:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("Xxa5"),s=i.n(a),n=i("//Fk"),r=i.n(n),l=i("exGp"),o=i.n(l),c=i("mvHQ"),u=i.n(c),h=i("CS20"),d=i("Cuuf"),m={data:function(){return{box:{width:0,height:0},isShow:!1,loading:!0,winWidth:window.innerWidth,resultData:[],pattern:!0,tableData:[],clickAnswer:"",clickParams:[],isNoJudege:1,questionItem:{},initAll:"",isFastFeedback:!1,paperId:"",questionId:"",practiceType:"",initItem:{},isTableShow:!1,isShowMinimize:!0,currentStudent:{}}},created:function(){this.initAll=this.$route.query.initAll?this.$route.query.initAll:""},mounted:function(){var t=this;this.loading=!0,h.a.getSingleDefaultPage().then(function(e){t.initItem.noResult=e,t.getChartData()}).catch(function(e){t.isShowMinimize=!1,t.getIsSingleNull(),t.getWebSingleChart(),t.getChartTable()})},methods:{getIsSingleNull:function(){var t=this;if(this.loading=!0,this.paperId=this.$route.query.paperId||this.local$.getItem("paperId"),this.questionId=this.$route.query.questionId||this.local$.getItem("questionId"),this.local$.setItem("paperId",this.paperId),this.local$.setItem("questionId",this.questionId),this.$route.query.isInit){this.questionOrder=this.$route.query.questionOrder,this.questionOrder=this.questionOrder?"第"+this.questionOrder+"题":this.local$.getItem("orderName"),this.local$.setItem("questionOrder",this.questionOrder);var e={exerciseRecordId:this.paperId,questionId:this.questionId};d.a.isSingelNull(e).then(function(e){t.loading=!1,e&&(t.initItem.noResult=!0,t.getWebTitle()),t.local$.setItem("noResult",t.initItem.noResult)})}else this.loading=!1,this.initItem.noResult=this.local$.getItem("noResult"),this.questionOrder=this.local$.getItem("questionOrder"),this.initItem.titleData=JSON.parse(this.local$.getItem("singleTitleData"))},getWebTitle:function(){var t=this,e={exerciseRecordId:this.paperId};d.a.getTitle(e).then(function(e){if(e){var i=JSON.parse(e.data);t.initItem.titleData={subjectName:i.subject_name,examName:i.paper_name,gradeClassName:""+i.grade_name+i.class_name,teacherName:i.teacher_name+"老师发起",infoData:[i.start_time.split(" ")[0].replace(/-/g,"/"),"周"+i.week_name,i.start_time.split(" ")[1].slice(0,5),"~",i.end_time?i.end_time.split(" ")[1].slice(0,5)+" ":""].join(" ")},t.local$.setItem("singleTitleData",u()(t.initItem.titleData))}})},getChartTable:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.isTableShow=!1;var s={exerciseRecordId:this.paperId,questionId:this.questionId,studentAnswer:t,studentScore:i,studentIsRight:a};d.a.getChartPieTable(s).then(function(t){e.isTableShow=!0,e.tableData=t})},getWebSingleChart:function(){var t=this,e={exerciseRecordId:this.paperId,questionId:this.questionId};d.a.getSingleChart(e).then(function(e){e&&(t.isShow=!0,t.resultData=JSON.parse(e.data),t.pattern=void 0!=t.resultData.record.pattern,t.pattern&&(t.isNoJudege=t.resultData.record.pattern))})},getChartData:function(){var t=this;this.loading=!1,h.a.getExerciseIdAndQuestionId().then(function(e){t.questionItem=e}),h.a.getOneQuestionClassStatistics().then(function(e){t.isShow=!0,t.resultData=e,t.pattern=void 0!=e.record.pattern,t.pattern&&(t.isNoJudege=e.record.pattern)}),h.a.getOneQuestionOriginalRecordList(null,null,null).then(function(e){t.isTableShow=!0,t.tableData=e})},toUrl:function(){2==this.isNoJudege?this.$confirm("当前试题为主观题且没有判题结果，所以该题认知结果统计无法生成，请判题后再查看！","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning",center:!0}).then(function(){}):this.$router.push({name:"smallReport"})},getBox:function(){var t=this;return o()(s.a.mark(function e(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new r.a(function(t,e){var i=document.getElementById("mychars1");i?t(i):e("error")});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},e,t)}))()},close:function(){try{this.local$.getItem("toSingle")?(this.local$.clear(),this.$router.push({name:"smallAllResult",query:{exerciseId:this.resultData.record.exercise_record_id}})):lw.Hide()}catch(t){this.local$.clear(),window.close()}},minimize:function(){lw.Minimized()},clickBtn:function(t){try{var e="?type="+t+"&exerciseId="+this.questionItem.exerciseRecordId+"&questionId="+this.questionItem.questionId;lwmain.ShowQuestionData(e)}catch(e){var i=this.local$.getItem("paperId"),a=this.local$.getItem("questionId");this.$router.push({name:"question",query:{type:t,exerciseId:i,questionId:a,toUrl:"smallResult"}})}},getChangeData:function(t){var e=this;this.clickParams=t,this.clickAnswer=t.clickAnswer;var i=null;""==this.clickParams.score&&""==this.clickParams.isRight&&(i=this.clickParams.clickAnswer);var a=this.clickParams.score?this.clickParams.score:null,s=null;""==this.clickParams.score&&this.clickParams.isRight&&(s="对"==this.clickParams.isRight?"true":"false"),this.isTableShow=!1,h.a.getOneQuestionOriginalRecordList(i,a,s).then(function(t){e.isTableShow=!0,e.tableData=t}).catch(function(t){e.getChartTable(i,a,s)})}},watch:{winWidth:function(t){}}},p={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"small-results-overview"},[i("el-container",[i("el-main",[t.initItem.noResult?[i("div",{staticClass:"inner-box",attrs:{flex:"dir:left"}},[i("div",{staticClass:"pie-left",attrs:{id:"mychars1"}},[t.pattern?[2==t.isNoJudege?[i("lw-nojudgment-chart",{attrs:{box:t.box,resultData:t.resultData}})]:[t.isShow?i("lw-line-chart",{attrs:{box:t.box,resultData:t.resultData},on:{changeData:t.getChangeData}}):t._e()]]:[t.isShow?i("lw-pie-chart",{attrs:{isFastFeedback:t.isFastFeedback,resultData:t.resultData},on:{changeData:t.getChangeData}}):t._e()]],2),t._v(" "),i("div",{staticClass:"pie-right",attrs:{id:"table"}},[t.isTableShow?i("lw-result-table",{attrs:{tableData:t.tableData,chartData:t.resultData.echart,pattern:t.resultData.record.pattern,clickAnswer:t.clickAnswer,isFastFeedback:t.isFastFeedback,currentStudent:t.currentStudent}}):t._e()],1)]),t._v(" "),i("div",{staticClass:"question-btn"},[t.pattern&&2!==t.isNoJudege?i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.clickBtn(1)}}},[t._v("正确答案")]):t._e(),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.clickBtn(2)}}},[t._v("解析")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.clickBtn(3)}}},[t._v("学习建议")])],1)]:[i("div",{staticClass:"single-mask-wrap"},[i("div",{staticClass:"single-mask"}),t._v(" "),i("p",[t._v("没有生成数据")])])],t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowMinimize,expression:"isShowMinimize"}],staticClass:"window-minimize",on:{click:t.minimize}},[t._v("最小化")]),t._v(" "),i("div",{staticClass:"window-close",on:{click:t.close}},[t._v("关闭")])],2),t._v(" "),i("el-footer",[i("div",{staticClass:"btn"},[i("span",{on:{click:t.toUrl}},[t._v("该题认知结果统计")]),t._v(" "),i("span",{staticClass:"active",on:{click:function(e){return t.$router.push({name:"smallResult"})}}},[t._v("该题答题结果统计")])])])],1)],1)},staticRenderFns:[]};var g=i("VU/8")(m,p,!1,function(t){i("fVxU")},"data-v-2b03a81c",null);e.default=g.exports},fVxU:function(t,e){}});