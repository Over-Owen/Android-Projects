webpackJsonp([2],{"2xhG":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7nRM"),n=a.n(s),r=a("Cuuf"),i={name:"resultTableComponent",props:["tableData","chartData","pattern","clickAnswer","isFastFeedback","questionId"],data:function(){return{tableHeight:0,optionText:"答题结果",isNoJudgment:!1,answerItem:[],localQuestionId:"",localPaperId:"",chartAnswer:"",resultTableData:[],localServerUrl:"",activityId:"",studentId:""}},computed:{sortTableData:function(){var t=this;return this.resultTableData&&this.resultTableData.length>0?(this.resetData(),n()(this.resultTableData).slice(0).sort(function(e,a){return e.student_id===t.studentId?-1:a.student_id===t.studentId?1:0})):this.resultTableData}},mounted:function(){var t=this;this.localServerUrl=window.localStorage.getItem("localServerUrl"),this.activityId=window.localStorage.getItem("activityId"),this.studentId=window.localStorage.getItem("studentId"),this.chartAnswer=this.clickAnswer,this.resultTableData=this.tableData;var e=document.getElementById("table");this.tableHeight=e.offsetHeight-40,"1"===this.chartData.feedbackType?this.optionText="答题结果":1===this.pattern?this.optionText="自判结果":0===this.pattern?this.optionText="自判得分":this.optionText="自判等级",this.isNoJudgment=2===this.pattern,this.resultTableData.forEach(function(e,a){e.answer&&t.answerItem.push(e)}),this.localQuestionId=this.local$.getItem("questionId"),this.localPaperId=this.local$.getItem("paperId"),this.resetData()},methods:{getChartTable:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n={activityId:this.activityId,questionId:this.localQuestionId,studentAnswer:t,studentScore:a,studentIsRight:s};r.a.getChartPieTable(this.localServerUrl,n).then(function(t){e.resultTableData=t})},getWebFeedbackList:function(){var t=this,e={activityId:this.activityId,questionId:this.questionId};r.a.getQuickFeedbackTable(this.localServerUrl,e).then(function(e){e&&(t.isTableShow=!0,t.resultTableData=e)})},allTables:function(){this.chartAnswer="",this.isNoJudgment=2===this.pattern,this.questionId?this.getWebFeedbackList():this.getChartTable()},noJudgment:function(){this.isNoJudgment=!1,this.chartAnswer="未作答",this.getChartTable(this.chartAnswer)},resetData:function(){var t=this;this.resultTableData.filter(function(e,a,s){var n=[];return t.isFastFeedback||(n=t.chartData.groupAvgTimeList?0===t.pattern||2===t.pattern?t.chartData.groupAvgTimeList.find(function(t){return t.student_name===e.student_score}):t.chartData.groupAvgTimeList.find(function(t){return t.student_name===e.is_right}):t.chartData.find(function(t){return t.student_name===e.answer}),e.avgTime=n?t.utils$.fromatDate(n.avgTime):0,e.use_time_str=e.use_time?t.utils$.fromatDate(e.use_time):0),s})},tableRowClassName:function(t){var e=t.row;return 0===t.rowIndex&&e.student_id==this.studentId?"highlight-tr":""}},watch:{resultTableData:function(t){this.resetData()}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"result-table-page",style:{fontSize:t.isFastFeedback?"16px":"14px"}},[a("div",{staticClass:"left-head"},[t.isNoJudgment?[t._v("已作答 "+t._s(t.answerItem.length)+" 人，未作答 "+t._s(t.resultTableData.length-t.answerItem.length)+" 人")]:[t._v(t._s(t.chartAnswer?t.chartAnswer+"的选项组":"全班组")+"，共计"+t._s(t.resultTableData.length)+"人。")],t._v(" "),t.chartAnswer?a("span",{staticClass:"cursor",on:{click:t.allTables}},[t._v("查看全部")]):t._e(),t._v(" "),t.isNoJudgment?a("span",{staticClass:"cursor",on:{click:t.noJudgment}},[t._v("查看未作答")]):t._e()],2),t._v(" "),a("div",{staticClass:"table",attrs:{id:"table"}},[a("el-table",{attrs:{data:t.sortTableData,border:"","max-height":t.tableHeight,"row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{prop:"student_number",label:"学生账号/优课号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"student_name",label:"学生姓名"}}),t._v(" "),a("el-table-column",{attrs:{label:t.optionText},scopedSlots:t._u([{key:"default",fn:function(e){return[t.isFastFeedback?a("span",[t._v(t._s(e.row.answer))]):a("div",[0===t.pattern?a("span",[t._v(t._s(e.row.student_score))]):1===t.pattern?a("span",[t._v(t._s(1==e.row.is_right?"对":"错"))]):a("span",[t._v(t._s(e.row.answer?e.row.answer:"未作答"))])])]}}])}),t._v(" "),t.isFastFeedback?t._e():a("el-table-column",{attrs:{label:"答题耗时"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.use_time_str?e.row.use_time_str:e.row.use_time))]}}],null,!1,3765635665)}),t._v(" "),t.isFastFeedback?t._e():a("el-table-column",{attrs:{label:"组平均用时"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.avgTime?e.row.avgTime:0))]}}],null,!1,867659208)})],1)],1)])},staticRenderFns:[]};var o=a("VU/8")(i,l,!1,function(t){a("8iWq")},null,null);e.default=o.exports},"5zde":function(t,e,a){a("zQR9"),a("qyJz"),t.exports=a("FeBl").Array.from},"7nRM":function(t,e,a){"use strict";e.__esModule=!0;var s,n=a("c/Tr"),r=(s=n)&&s.__esModule?s:{default:s};e.default=function(t){return Array.isArray(t)?t:(0,r.default)(t)}},"8iWq":function(t,e){},"c/Tr":function(t,e,a){t.exports={default:a("5zde"),__esModule:!0}},fBQ2:function(t,e,a){"use strict";var s=a("evD5"),n=a("X8DO");t.exports=function(t,e,a){e in t?s.f(t,e,n(0,a)):t[e]=a}},qyJz:function(t,e,a){"use strict";var s=a("+ZMJ"),n=a("kM2E"),r=a("sB3e"),i=a("msXi"),l=a("Mhyx"),o=a("QRG4"),u=a("fBQ2"),c=a("3fs2");n(n.S+n.F*!a("dY0y")(function(t){Array.from(t)}),"Array",{from:function(t){var e,a,n,d,h=r(t),f="function"==typeof this?this:Array,v=arguments.length,_=v>1?arguments[1]:void 0,b=void 0!==_,m=0,g=c(h);if(b&&(_=s(_,v>2?arguments[2]:void 0,2)),void 0==g||f==Array&&l(g))for(a=new f(e=o(h.length));e>m;m++)u(a,m,b?_(h[m],m):h[m]);else for(d=g.call(h),a=new f;!(n=d.next()).done;m++)u(a,m,b?i(d,_,[n.value,m],!0):n.value);return a.length=m,a}})}});